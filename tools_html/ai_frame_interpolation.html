<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIè§†é¢‘è¡¥å¸§ - é«˜å¸§ç‡æ’å€¼</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/ai_frame_interpolation.css">
</head>

<body>
    <script src="../third_part/onnxruntime-web/1.17.1/ort.webgpu.min.js"></script>
    <!-- mp4-muxer: ä¼˜å…ˆä» jsdelivr CDN åŠ è½½ï¼Œå¦‚æœå¤±è´¥åˆ™ä½¿ç”¨æœ¬åœ°å¤‡ç”¨ -->
    <script>
        (function() {
            var script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mp4-muxer@5.2.2/build/mp4-muxer.min.js';
            script.onload = function() {
                console.log('âœ… mp4-muxerä»jsdelivr CDNåŠ è½½æˆåŠŸ');
            };
            script.onerror = function() {
                console.warn('âš ï¸ CDNåŠ è½½mp4-muxerå¤±è´¥ï¼Œå°è¯•unpkg...');
                var fallback = document.createElement('script');
                fallback.src = 'https://unpkg.com/mp4-muxer@5.2.2/build/mp4-muxer.min.js';
                fallback.onload = function() {
                    console.log('âœ… mp4-muxerä»unpkg CDNåŠ è½½æˆåŠŸ');
                };
                fallback.onerror = function() {
                    console.warn('âš ï¸ unpkg CDNä¹Ÿå¤±è´¥äº†ï¼Œä½¿ç”¨æœ¬åœ°å¤‡ç”¨æ–‡ä»¶...');
                    var localFallback = document.createElement('script');
                    localFallback.src = '../third_part/mp4-muxer.umd.js';
                    localFallback.onload = function() {
                        console.log('âœ… mp4-muxerä»æœ¬åœ°åŠ è½½æˆåŠŸ');
                    };
                    localFallback.onerror = function() {
                        console.error('âŒ æ‰€æœ‰åŠ è½½æ–¹å¼éƒ½å¤±è´¥ï¼');
                        console.error('è¯·æ‰‹åŠ¨ä¸‹è½½åˆ° third_part æ–‡ä»¶å¤¹');
                        console.error('ä¸‹è½½åœ°å€: https://cdn.jsdelivr.net/npm/mp4-muxer@5.2.2/build/mp4-muxer.min.js');
                    };
                    document.head.appendChild(localFallback);
                };
                document.head.appendChild(fallback);
            };
            document.head.appendChild(script);
        })();
    </script>
    <script src="../js/menu.js"></script>
    <script src="../js/ai_frame_interpolation.js" defer></script>
    <div id="main_bg"></div>
    <div class="left_menu">
        <ul class="menu_root">
            <li class="left_item">
                <div class="left_icon" id="left_icon1"></div>
                <div class="item_context">AIå·¥å…·ç®±</div>
                <ul class="sub_menu">
                    <li><a href="chatgpt.html">ChatGPT</a></li>
                    <li><a href="ai_upscale.html">AIé«˜æ¸…æ”¾å¤§</a></li>
                    <li><a href="ai_frame_interpolation_simple.html">AIæ’å¸§/åˆ†è¾¨ç‡</a></li>
                    <li><a href="ai_draw.html">AIç»˜ç”»</a></li>
                </ul>
            </li>
            <li class="left_item">
                <div class="left_icon" id="left_icon1"></div>
                <div class="item_context">3Då·¥å…·/å›¾ç‰‡å¤„ç†</div>
                <ul class="sub_menu">
                    <li><a href="compress_image.html">å›¾ç‰‡å‹ç¼©è½¬æ¢</a></li>
                    <li><a href="3d_city.html">3DåŸå¸‚åœ°å½¢ç­‘ä¸‹è½½</a></li>
                    <li><a href="combine_rgba.html">è´´å›¾é€šé“åˆæˆ</a></li>
                    <li><a href="hdr_editor.html">HDRç¼–è¾‘å™¨</a></li>
                    <li><a href="ps_online.html">åœ¨çº¿PS</a></li>
                    <li><a href="pbr_texture_generator.html">PBRè´´å›¾ç”Ÿæˆå™¨</a></li>
                    <li><a href="model_previewer.html">æ¨¡å‹é¢„è§ˆå™¨</a></li>
                </ul>
            </li>
            <li class="left_item">
                <div class="left_icon" id="left_icon1"></div>
                <div class="item_context">è§†é¢‘å¤„ç†</div>
                <ul class="sub_menu">
                    <li><a href="video_cut.html">è§†é¢‘å‰ªè¾‘</a></li>
                    <li><a href="video_format_cover.html">è§†é¢‘æ ¼å¼è½¬æ¢</a></li>
                </ul>
            </li>
            <li class="left_item">
                <div class="left_icon" id="left_icon1"></div>
                <div class="item_context">TAå·¥å…·</div>
                <ul class="sub_menu">
                    <li><a href="shader_library.html">shaderå‡½æ•°åº“</a></li>
                    <li><a href="ue_material_picture.html">UEæè´¨åº“</a></li>
                    <li><a href="physics_light.html">ç‰©ç†å…‰ç…§è®¡ç®—å™¨</a></li>
                    <li><a href="TA_wiki.html">TAçŸ¥è¯†åº“</a></li>
                </ul>
            </li>
            <li class="left_item">
                <div class="left_icon" id="left_icon1"></div>
                <div class="item_context">å’Œæˆ‘ä¸€èµ·å¬</div>
                <ul class="sub_menu">
                    <li><a href="cloud_music.html">ç½‘æ˜“äº‘éŸ³ä¹</a></li>
                </ul>
            </li>
            <li class="left_item">å…³äº

            </li>
        </ul>
    </div>
    <div class="top_search">
        <input type="text" placeholder="æœç´¢">
    </div>
    <div id="panel">
        <div class="main-content">
            <h1>AIè§†é¢‘è¡¥å¸§å·¥å…·</h1>
            
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <!-- ä¸Šä¼ æç¤º -->
                    <div class="upload-content" id="uploadContent">
                        <p>æ‹–æ‹½è§†é¢‘åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                        <p class="sub-text">æ”¯æŒ MP4, AVI, MOV, MKV æ ¼å¼</p>
                    </div>
                    
                    <!-- å•è§†é¢‘æ˜¾ç¤ºï¼ˆä¸Šä¼ åï¼Œå¤„ç†å‰ï¼‰ -->
                    <div id="singleVideoContainer" style="display: none;">
                        <div class="video-container">
                            <video id="inputVideoPreview" controls></video>
                        </div>
                        <div id="videoInfoDisplay" style="margin-top: 10px; font-size: 13px; color: #ddd; text-align: center;"></div>
                        <button id="reuploadBtn" class="btn-secondary" style="margin-top: 15px;">é‡æ–°ä¸Šä¼ </button>
                    </div>
                    
                    <!-- å·¦å³å¯¹æ¯”æ˜¾ç¤ºï¼ˆå¤„ç†åï¼‰ -->
                    <div id="compareContainer" style="display: none;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                            <div>
                                <h4 style="color: #888; margin-bottom: 10px; text-align: center; font-size: 14px;">ğŸ“¹ åŸè§†é¢‘ ({{originalFps}} FPS)</h4>
                                <div class="video-container">
                                    <video id="compareOriginalMain" controls></video>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: #00ff88; margin-bottom: 10px; text-align: center; font-size: 14px;">âœ¨ å¤„ç†å ({{targetFps}} FPS)</h4>
                                <div class="video-container">
                                    <video id="compareProcessedMain" controls></video>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-bottom: 10px; color: #888; font-size: 13px;">
                            ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä»»æ„è§†é¢‘æ’­æ”¾ï¼Œä¸¤ä¸ªè§†é¢‘ä¼šåŒæ­¥æ’­æ”¾
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button id="downloadBtnMain" class="btn-primary">ä¸‹è½½å¤„ç†åçš„è§†é¢‘</button>
                            <button id="reprocessBtn" class="btn-secondary">é‡æ–°å¤„ç†</button>
                            <button id="reuploadBtn2" class="btn-secondary">é‡æ–°ä¸Šä¼ </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <input type="file" id="fileInput" accept="video/*" hidden>
            
            <div class="settings-panel">
                
                <div class="setting-group">
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="enableInterpolation" checked style="width: auto; margin-right: 8px;">
                        å¯ç”¨AIè¡¥å¸§
                    </label>
                    <select id="frameMultiplierSelect" style="margin-top: 10px;">
                        <option value="60" selected>60 FPS</option>
                        <option value="120">120 FPS</option>
                        <option value="144">144 FPS</option>
                        <option value="240">240 FPS</option>
                    </select>
                    <div id="fpsInfo" style="margin-top: 8px; font-size: 12px; color: #888;">åŸè§†é¢‘: -- fps</div>
                </div>
                
                <div class="setting-group">
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="enableUpscale" style="width: auto; margin-right: 8px;">
                        å¯ç”¨AIè¶…åˆ†è¾¨ç‡
                    </label>
                    <select id="upscaleScale" style="margin-top: 10px;">
                        <option value="2" selected>2å€æ”¾å¤§</option>
                        <option value="4">4å€æ”¾å¤§</option>
                    </select>
                </div>
                
                <div class="setting-group">
                    <label>å¤„ç†åˆ†è¾¨ç‡</label>
                    <select id="resolutionLimit">
                        <option value="original" selected>åŸå§‹åˆ†è¾¨ç‡</option>
                        <option value="3840">4K (2160p)</option>
                        <option value="2560">2K (1440p)</option>
                        <option value="1920">1080p</option>
                        <option value="1280">720p</option>
                        <option value="960">540p</option>
                        <option value="640">480p</option>
                    </select>
                </div>
                
                <!-- ğŸ¨ é«˜çº§åå¤„ç†å¢å¼º -->
                <div class="setting-group" style="border: 1px solid #00d9ff; border-radius: 8px; padding: 15px; background: rgba(0,217,255,0.05);">
                    <label style="color: #00d9ff; font-weight: bold; display: flex; align-items: center; gap: 8px;">
                        <span>ğŸ¨</span> é«˜çº§åå¤„ç†å¢å¼º
                    </label>
                    
                    <div style="margin-top: 12px;">
                        <label style="font-size: 13px; display: flex; justify-content: space-between;">
                            <span>ğŸ”ª è‡ªé€‚åº”é”åŒ–ï¼ˆTheiaï¼‰</span>
                            <span id="sharpenValue" style="color: #00d9ff;">0</span>
                        </label>
                        <input type="range" id="sharpenStrength" min="0" max="100" value="0" step="5" style="width: 100%; margin-top: 5px;">
                    </div>
                    
                    <div style="margin-top: 12px;">
                        <label style="font-size: 13px; display: flex; justify-content: space-between;">
                            <span>ğŸ§¹ æ™ºèƒ½é™å™ªï¼ˆProteusï¼‰</span>
                            <span id="denoiseValue" style="color: #00d9ff;">0</span>
                        </label>
                        <input type="range" id="denoiseStrength" min="0" max="100" value="0" step="5" style="width: 100%; margin-top: 5px;">
                    </div>
                    
                    <div style="margin-top: 12px;">
                        <label style="font-size: 13px; display: flex; justify-content: space-between;">
                            <span>ğŸ“Š å¯¹æ¯”åº¦å¢å¼º</span>
                            <span id="contrastValue" style="color: #00d9ff;">0</span>
                        </label>
                        <input type="range" id="contrastAdjust" min="-50" max="50" value="0" step="5" style="width: 100%; margin-top: 5px;">
                    </div>
                    
                    <div style="margin-top: 12px;">
                        <label style="font-size: 13px; display: flex; justify-content: space-between;">
                            <span>ğŸï¸ èƒ¶ç‰‡é¢—ç²’</span>
                            <span id="grainValue" style="color: #00d9ff;">0</span>
                        </label>
                        <input type="range" id="filmGrain" min="0" max="100" value="0" step="5" style="width: 100%; margin-top: 5px;">
                    </div>
                    
                    <div style="margin-top: 10px; font-size: 12px; color: #888;">
                        ğŸ’¡ æç¤ºï¼šå¢å¼ºå¤„ç†ä¼šå¢åŠ å¤„ç†æ—¶é—´ï¼Œå»ºè®®æ ¹æ®è§†é¢‘è´¨é‡æŒ‰éœ€å¯ç”¨
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>GPUåŠ é€Ÿ</label>
                    <div class="radio-group">
                        <label><input type="radio" name="executionMode" value="gpu" checked> å¯ç”¨</label>
                        <label><input type="radio" name="executionMode" value="cpu"> ç¦ç”¨</label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>è¡¥å¸§æ¨¡å‹</label>
                    <select id="modelSelect">
                        <option value="rife-v4.18">ğŸŒŸ RIFE v4.18 (æœ€é«˜è´¨é‡ - æ¨è)</option>
                        <option value="rife-v4.6" selected>RIFE v4.6 (ç¨³å®š)</option>
                        <option value="rife-v4.15">RIFE v4.15 (åŠ¨ç”»)</option>
                        <option value="rife-v4.15-lite">RIFE v4.15 Lite (å¿«é€Ÿ)</option>
                        <option value="rife-v4.9">RIFE v4.9 (å…¼å®¹)</option>
                    </select>
                    <div style="font-size: 12px; color: #888; margin-top: 5px;">
                        ğŸ’¡ v4.18è´¨é‡æœ€é«˜ä½†ç•¥æ…¢ï¼ŒLiteç‰ˆæœ¬é€Ÿåº¦å¿«2å€
                    </div>
                </div>
                
                <div class="setting-group">
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="enableUpscale" style="width: auto; margin-right: 8px;">
                        å¯ç”¨AIè¶…åˆ†è¾¨ç‡
                    </label>
                    <select id="upscaleModel" style="margin-top: 10px;">
                        <option value="realesrgan-x4plus" selected>Real-ESRGAN (é€šç”¨åœºæ™¯)</option>
                        <option value="realesrgan-anime">ğŸ¨ Real-ESRGAN Anime (åŠ¨ç”»ä¸“ç”¨)</option>
                    </select>
                    <select id="upscaleScale" style="margin-top: 10px;">
                        <option value="2">2x æ”¾å¤§</option>
                        <option value="4" selected>4x æ”¾å¤§</option>
                    </select>
                    <div style="font-size: 12px; color: #888; margin-top: 5px;">
                        âš ï¸ è¶…åˆ†ä¼šå¤§å¹…å¢åŠ å¤„ç†æ—¶é—´
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>GPUåŠ é€Ÿ</label>
                    <div class="radio-group">
                        <label><input type="radio" name="executionMode" value="gpu" checked> å¯ç”¨</label>
                        <label><input type="radio" name="executionMode" value="cpu"> ç¦ç”¨</label>
                    </div>
                </div>
                
                <div class="setting-group" style="border-top: 2px solid #333; padding-top: 15px;">
                    <div class="model-status" id="modelStatus" style="font-size: 13px;">æœªåŠ è½½</div>
                    <button id="loadModelBtn" class="btn-primary" style="margin-top: 10px; width: 100%;">ğŸš€ åŠ è½½æ¨¡å‹</button>
                </div>
                
                <div class="setting-group">
                    <label style="display: flex; align-items: center;">
                        <input type="checkbox" id="testMode" style="width: auto; margin-right: 8px;">
                        æµ‹è¯•æ¨¡å¼ï¼ˆä»…å¤„ç†3ç§’ï¼‰
                    </label>
                </div>
            
            <div class="action-buttons">
                <button id="processBtn" class="btn-primary" disabled>å¼€å§‹å¤„ç†</button>
            </div>
            
            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">å¤„ç†ä¸­...</div>
            </div>
            
            <div class="processing-stats" id="processingStats" style="display: none; margin-top: 20px; padding: 20px; background: rgba(0, 217, 255, 0.05); border-radius: 8px; border: 1px solid rgba(0, 217, 255, 0.2);">
                <h3 style="font-size: 16px; color: #00d9ff; margin-bottom: 10px;">ğŸ“Š å¤„ç†ä¿¡æ¯</h3>
                <div id="statsContent" style="font-size: 13px; line-height: 1.8; color: #aaa;"></div>
            </div>
        </div>
    </div>

</body>

</html>
